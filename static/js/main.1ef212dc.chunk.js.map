{"version":3,"sources":["firebase/config.js","firebase/useFirestore.js","firebase/firestoreFunctions.js","App.js","index.js"],"names":["firebase","initializeApp","apiKey","process","authDomain","projectId","messagingSenderId","appId","measurementId","myFirestore","firestore","useFirestore","collectionName","useState","docs","setDocs","useEffect","unsubscribe","collection","onSnapshot","snap","newDocs","forEach","doc","push","data","id","uploadFirestore","set","then","console","log","catch","error","App","modules","groups","group","setGroup","modulesGroup","setModulesGroup","formType","setFormType","formTitle","setFormTitle","formContent","setFormContent","find","gr","name","filter","module","className","Dropdown","Toggle","variant","Menu","sort","a","b","x","toLowerCase","y","map","Item","onClick","handleSelectGroup","types","type","text","title","content","value","onChange","e","target","preventDefault","moduleExists","newID","split","join","newTypes","concat","delete","length","newName","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.1ef212dc.chunk.js","sourcesContent":["import firebase from 'firebase'\r\n\r\nvar firebaseConfig = {\r\n    apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\r\n    authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\r\n    projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\r\n    messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\r\n    appId: process.env.REACT_APP_FIREBASE_APP_ID,\r\n    measurementId: process.env.REACT_APP_FIREBASE_MEASURMENT_ID\r\n  };\r\n  // Initialize Firebase\r\n  firebase.initializeApp(firebaseConfig);\r\n\r\n  const myFirestore = firebase.firestore();\r\n\r\n  export { myFirestore };","import { useState , useEffect } from 'react'\r\nimport { myFirestore } from '../firebase/config.js'\r\n\r\nexport const useFirestore = (collectionName) => {\r\n    const [docs , setDocs] = useState([]);\r\n    useEffect(()=>{\r\n        const unsubscribe = myFirestore.collection(collectionName)\r\n            .onSnapshot((snap)=>{\r\n                let newDocs = [];\r\n                snap.forEach(doc=>{\r\n                    newDocs.push({...doc.data(), id: doc.id})\r\n                })\r\n                setDocs(newDocs);\r\n            })\r\n        return () => unsubscribe();\r\n    }, [collectionName]);\r\n\r\n    return docs;\r\n}","import { myFirestore } from './config.js'\r\n\r\nexport const uploadFirestore = (collection, doc) => {\r\n    myFirestore.collection(collection).doc(doc.id).set(doc).then(()=>console.log(\"document uploaded to firestore\")).catch(function(error) {\r\n        console.error(\"Error writing document: \", error);\r\n    });;\r\n}\r\n\r\nexport const deleteFirestore = (collection, id) => {\r\n    myFirestore.collection(collection).doc(id).delete().then(()=>console.log(\"document deleted from firestore\")).catch(function(error) {\r\n        console.error(\"Error deleting document: \", error);\r\n    });;\r\n}","import 'bootstrap/dist/css/bootstrap.min.css';\nimport './App.css'\nimport { Dropdown } from 'react-bootstrap'\nimport { useState , useEffect } from 'react';\nimport { useFirestore } from './firebase/useFirestore';\nimport { uploadFirestore , deleteFirestore } from './firebase/firestoreFunctions';\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\n\n//ADMIN PAGE\nfunction App() {\n  const modules = useFirestore('moduloose/moduloose-main/modules'); //Array of all modules\n  const groups = useFirestore('moduloose/moduloose-main/groups'); //Array of all groups\n  \n  const [group, setGroup] = useState(null);\n  const [modulesGroup, setModulesGroup] = useState(null);\n  \n  //MODULE FORM\n  const [formType, setFormType] = useState(\"\");\n  const [formTitle, setFormTitle] = useState(\"\");\n  const [formContent, setFormContent] = useState(\"\");\n\n  useEffect(()=>{\n    group && setGroup(groups.find((gr) => gr.name === group.name));\n    group && setModulesGroup(modules.filter((module) => module.group === group.name))\n  }, [groups, group, modules]);\n\n  const handleChangeType = (e) => {\n    setFormType(e.target.value);\n  }\n\n  const handleChangeTitle = (e) => {\n    setFormTitle(e.target.value);\n  }\n\n  const handleChangeContent = (e) => {\n    setFormContent(e.target.value);\n  }\n\n  const handleSelectGroup = (group) => {\n    setGroup(group);\n    setModulesGroup(modules.filter((module) => module.group === group.name));\n  }\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    \n    if(formType && formTitle && formContent !== \"delete\" && formContent !== \"change\"){\n      //ADDING OR UPDATING\n      let moduleExists = modulesGroup.filter(module => module.type === formType).find(module => module.title === formTitle);\n      if(moduleExists){\n        ///UPDATING MODULE\n        console.log(\"Updating Module\")\n        uploadFirestore('moduloose/moduloose-main/modules', {group: group.name, type: formType, title: formTitle, content: formContent, id: moduleExists.id});\n      } else {\n      ///ADDING MODULE\n        console.log(\"Creating Module\")\n        let newID = group.name + formType + formTitle;\n        newID = newID.split(\" \").join(\"_\");\n        uploadFirestore('moduloose/moduloose-main/modules', {group:group.name, type: formType, title: formTitle, content: formContent, id: newID});\n        ////MANAGE TYPE\n        let typeExists = group.types.find((type) => type === formType);\n        if(typeExists) {\n          console.log(\"--Type already exists\");\n        } \n        ////TYPE DOES NOT EXIST\n        else {\n          console.log(\"--Creating Type\")\n          let newTypes = [...group.types].concat([formType]);\n          uploadFirestore('moduloose/moduloose-main/groups', {...group, types: newTypes});\n        }\n      }\n    } \n    else if (formType && formTitle && formContent === (\"delete\" || \"\")) {\n      //DELETING MODULE\n      let moduleExists = modulesGroup.find((module) => module.title === formTitle && module.type === formType);\n      if(moduleExists) {\n        console.log(\"Deleting Module\")\n        deleteFirestore('moduloose/moduloose-main/modules', moduleExists.id);\n        ////MANAGE TYPE\n        let typesLeft = modulesGroup.filter((module) => module.type === formType).length\n        if(typesLeft <= 1) {\n          console.log(\"--Deleting Type from Group\")\n          let newTypes = [...group.types].filter(type => type !== formType);\n          uploadFirestore('moduloose/moduloose-main/groups', {...group, types: newTypes});\n        } else {\n          console.log(\"--Type was preserved\")\n        }\n      }\n      else {\n        ///MODULE DOES NOT EXIST\n        console.log(\"Module does not exist\");\n      }\n    } else if (formType && formTitle && formContent === \"change\"){\n      //CHANGE TYPE NAME\n      let newName = formTitle;\n      if(group.types.find(type => type === formType)){\n        //CHANGE TYPE IN MODULES\n        let modulesToChange = modulesGroup.filter(module => module.type === formType);\n        modulesToChange.forEach(module => {\n          console.log(\"Changing type in Module\")\n          uploadFirestore('moduloose/moduloose-main/modules', {...module, type: newName});\n        });\n        ///CHANGE TYPE IN GROUP\n        let newTypes = [...group.types].filter(type=>type !== formType).concat([newName]);\n        console.log(\"New Types: \" + newTypes);\n        uploadFirestore('moduloose/moduloose-main/groups', {...group, types: newTypes});\n        console.log(\"Changing Type in Group\");\n      }\n    } else {\n      console.log(\"No valid option\");\n    }\n    setFormType(\"\");\n    setFormTitle(\"\");\n    setFormContent(\"\");\n  }\n\n  //RENDER ADMIN PAGE\n  return (\n    <div id=\"app\" className=\"admin\">\n      <div id=\"content-container\">\n        <div id=\"selector-wrapper\">\n          <div className=\"title-div\">\n            <h1>Moduloose Admin</h1>\n          </div>\n          { groups &&\n            <Dropdown>\n              <Dropdown.Toggle variant=\"light\" id=\"main-dropdown\">\n                  {group ? group.name : \"Select Group\"}\n              </Dropdown.Toggle>\n              <Dropdown.Menu>\n                {groups.sort((a, b)=>{\n              var x = a.name.toLowerCase();\n              var y = b.name.toLowerCase();\n              if (x < y) {return -1;}\n              if (x > y) {return 1;}\n              return 0;\n            }).map(group => {\n                  return(\n                    <Dropdown.Item id={group.name} onClick={() => handleSelectGroup(group)}>{group.name}</Dropdown.Item>\n                  );\n                })}\n              </Dropdown.Menu>\n            </Dropdown>\n          }\n          {/*VIEW MODULES*/ modules && group &&\n            group.types.sort().map(type => {\n              return (\n                <Dropdown id={type} className=\"selector-dropdown\">\n                  <Dropdown.Toggle variant=\"dark\">{type}</Dropdown.Toggle>\n                  <CopyToClipboard id={type + \"-copy\"} text={type}><button className=\"btn btn-light edit-button\">Copy</button></CopyToClipboard>\n                  <Dropdown.Menu>\n                    {modulesGroup && modulesGroup.filter((module)=>module.type === type).map(module => {\n                        return(\n                          <>\n                          <CopyToClipboard id={module.id} text={module.title}><Dropdown.Item onClick={() => setFormContent(module.content)}>{module.title}</Dropdown.Item></CopyToClipboard>\n                          </>\n                        )\n                    })}\n                  </Dropdown.Menu>\n                </Dropdown>\n              )\n            })\n          }\n          {/*EDIT MODULE FORM*/modules && group &&\n            <form className=\"form-container\">\n              <h3>Add-Update-Remove Module</h3>\n              <label>Type</label>\n              <input id=\"type-input\" type=\"text\" value={formType} onChange={handleChangeType}></input>\n              <label>Title</label>\n              <input id=\"title-input\" type=\"text\" value={formTitle} onChange={handleChangeTitle}></input>\n              <label>Content</label>\n              <textarea id=\"content-input\" type=\"text\" value={formContent} onChange={handleChangeContent}></textarea>\n              <button className=\"btn btn-dark edit-button\" onClick={handleSubmit}>Submit</button>\n            </form>       \n          }\n        </div>\n      </div>\n    </div>\n  );\n  \n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}