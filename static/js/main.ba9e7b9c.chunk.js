(this["webpackJsonpmoduloose-admin"]=this["webpackJsonpmoduloose-admin"]||[]).push([[0],{36:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var o=n(4),c=n(2),i=n.n(c),r=n(17),l=n.n(r),a=n(12),s=n(25),d=n(13),u=(n(35),n(36),n(51)),j=n(24);j.a.initializeApp({apiKey:"AIzaSyDmZSo7o8WB-bsge5T_Rd9VJdODhA-wD2Y",authDomain:"my-firebase-1f789.firebaseapp.com",projectId:"my-firebase-1f789",messagingSenderId:"917517905132",appId:"1:917517905132:web:2cc22f398c1a2511a209c9",measurementId:"G-7N4N4SG1FZ"});var b=j.a.firestore(),m=function(e){var t=Object(c.useState)([]),n=Object(d.a)(t,2),o=n[0],i=n[1];return Object(c.useEffect)((function(){var t=b.collection(e).onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(a.a)(Object(a.a)({},e.data()),{},{id:e.id}))})),i(t)}));return function(){return t()}}),[e]),o},f=function(e,t){b.collection(e).doc(t.id).set(t).then((function(){return console.log("document uploaded to firestore")})).catch((function(e){console.error("Error writing document: ",e)}))},p=n(23);var O=function(){var e=m("/moduloose/Uw7nTXVOrY0nocrZDLWH/Modules"),t=m("moduloose/Uw7nTXVOrY0nocrZDLWH/Skills"),n=Object(c.useState)(null),i=Object(d.a)(n,2),r=i[0],l=i[1],j=Object(c.useState)(""),O=Object(d.a)(j,2),h=O[0],x=O[1],y=Object(c.useState)(""),g=Object(d.a)(y,2),v=g[0],D=g[1],N=Object(c.useState)(""),S=Object(d.a)(N,2),C=S[0],I=S[1];return Object(c.useEffect)((function(){r&&l(t.find((function(e){return e.name===r.name})))}),[t,r]),Object(o.jsx)("div",{id:"app",className:"admin",children:Object(o.jsx)("div",{id:"content-container",children:Object(o.jsxs)("div",{children:[Object(o.jsx)("h1",{children:"Moduloose Admin"}),t&&Object(o.jsxs)(u.a,{children:[Object(o.jsx)(u.a.Toggle,{variant:"light",children:r?r.name:"Select Collection"}),Object(o.jsx)(u.a.Menu,{children:t.map((function(e){return Object(o.jsx)(u.a.Item,{id:e.name,onClick:function(){return l(e)},children:e.name})}))})]}),e&&r&&r.types.sort((function(e,t){var n=e.typeName.toLowerCase(),o=t.typeName.toLowerCase();return n<o?-1:n>o?1:0})).map((function(t){return Object(o.jsxs)(u.a,{id:t.typeName,className:"selector-dropdown",children:[Object(o.jsx)(u.a.Toggle,{variant:"dark",children:t.typeName}),Object(o.jsx)(p.CopyToClipboard,{id:t.typeName,text:t.typeName,children:Object(o.jsx)("button",{className:"btn btn-light edit-button",children:"Copy Type"})}),Object(o.jsx)(u.a.Menu,{children:t.moduleIDs&&t.moduleIDs.map((function(t){var n=e.find((function(e){return e.id===t}));if(n)return Object(o.jsx)(p.CopyToClipboard,{id:t,text:n.title,children:Object(o.jsx)(u.a.Item,{onClick:function(){return console.log("Clicked")},children:n.title})})}))})]})})),e&&r&&Object(o.jsxs)("form",{className:"form-container",children:[Object(o.jsx)("h3",{children:"Add-Update-Remove Module"}),Object(o.jsx)("label",{children:"Type"}),Object(o.jsx)("input",{id:"type-input",type:"text",value:h,onChange:function(e){x(e.target.value)}}),Object(o.jsx)("label",{children:"Title"}),Object(o.jsx)("input",{id:"title-input",type:"text",value:v,onChange:function(e){D(e.target.value)}}),Object(o.jsx)("label",{children:"Content"}),Object(o.jsx)("textarea",{id:"content-input",type:"text",value:C,onChange:function(e){I(e.target.value)}}),Object(o.jsx)("button",{className:"btn btn-dark edit-button",onClick:function(t){if(t.preventDefault(),h&&v&&"delete"!==C&&""!==C){var n=r.name+h+v;if(n=n.split(" ").join("_"),console.log(n),e.find((function(e){return e.id===n})))f("/moduloose/Uw7nTXVOrY0nocrZDLWH/Modules",{title:v,content:C,id:n});else{f("/moduloose/Uw7nTXVOrY0nocrZDLWH/Modules",{title:v,content:C,id:n});var o=Object(s.a)(r.types),c=r.types.find((function(e){return e.typeName===h}));c?c.moduleIDs.push(n):o.push({typeName:h,moduleIDs:[n]}),f("moduloose/Uw7nTXVOrY0nocrZDLWH/Skills",Object(a.a)(Object(a.a)({},r),{},{types:o}))}}else if(h&&v&&"delete"===C){var i=r.name+h+v;if(i=i.split(" ").join("_"),console.log("MODULES: "+e),console.log("Delete ID: "+i),console.log(e.map((function(e){return console.log(e.id)}))),e.find((function(e){return e.id===i}))){!function(e,t){b.collection(e).doc(t).delete().then((function(){return console.log("document deleted from firestore")})).catch((function(e){console.error("Error deleting document: ",e)}))}("moduloose/Uw7nTXVOrY0nocrZDLWH/Modules",i);var l=Object(s.a)(r.types),d=r.types.find((function(e){return e.typeName===h}));d.moduleIDs=d.moduleIDs.filter((function(e){return e!==i})),0===d.moduleIDs.length&&(l=l.filter((function(e){return e.typeName!==h}))),f("moduloose/Uw7nTXVOrY0nocrZDLWH/Skills",Object(a.a)(Object(a.a)({},r),{},{types:l}))}else console.log("Module does not exist")}else h&&"delete"===C?console.log("We are deleting a type"):console.log("No valid option");x(""),D(""),I("")},children:"Submit"})]})]})})})};l.a.render(Object(o.jsx)(i.a.StrictMode,{children:Object(o.jsx)(O,{})}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.ba9e7b9c.chunk.js.map